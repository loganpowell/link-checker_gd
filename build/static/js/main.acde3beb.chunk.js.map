{"version":3,"sources":["index.js"],"names":["App","_useState","useState","_useState2","Object","C_Users_logan_Projects_census_granicus_link_checker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","url","setUrl","_useState3","_useState4","page","setPage","_useState5","_useState6","links","setLinks","_useState7","_useState8","error","setError","pageRef","useRef","_handleSubmit2","C_Users_logan_Projects_census_granicus_link_checker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","C_Users_logan_Projects_census_granicus_link_checker_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","e","main","aTags","_links","wrap","_context","prev","next","preventDefault","fetch","concat","then","res","text","sent","current","querySelector","querySelectorAll","Array","from","map","link","content","type","image","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","src","alt","style","maxHeight","backgroundColor","console","log","href","stop","apply","this","arguments","className","onSubmit","_x","_handleSubmit","textAlign","width","value","onChange","target","length","display","flexDirection","alignItems","onClick","C_Users_logan_Projects_census_granicus_link_checker_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","Set","forEach","window","open","ref","margin","dangerouslySetInnerHTML","__html","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.acde3beb.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport \"./styles.css\"\n\nfunction App() {\n  const [url, setUrl] = useState(\"251e42f\")\n\n  const [page, setPage] = useState(\"\")\n  const [links, setLinks] = useState([])\n  const [error, setError] = useState(false)\n  const pageRef = useRef(null)\n\n  async function _handleSubmit(e) {\n    e.preventDefault()\n\n    await setError(false)\n    const page = await fetch(\n      `https://cors-e.herokuapp.com/https://content.govdelivery.com/accounts/USCENSUS/bulletins/${url}`\n    ).then(res => res.text())\n    await setPage(page)\n\n    //scrape page for urls\n    const main = pageRef.current.querySelector(\".main-table\")\n    if (main) {\n      const aTags = main.querySelectorAll(\"a\")\n      const links = Array.from(aTags).map(link => {\n        let content = link.text\n        let type = \"text\"\n\n        if (!content) {\n          const image = link.querySelector(\"img\")\n          if (image) {\n            type = \"image\"\n            content = (\n              <img\n                src={image.src}\n                alt={image.alt}\n                style={{ maxHeight: \"5em\", backgroundColor: \"black\" }}\n              />\n            )\n          } else {\n            console.log(link)\n            type = \"hidden link\"\n          }\n        }\n        return { href: link.href, content, type }\n      })\n      setLinks(links)\n    } else {\n      setLinks([])\n      setError(true)\n    }\n  }\n\n  function testLinks() {\n    //open all links in new tab\n    ;[...new Set(links.map(link => link.href))].forEach(url =>\n      window.open(url, \"_blank\")\n    )\n  }\n\n  return (\n    <div className='App'>\n      <h2>GovDelivery Link Tester</h2>\n      <p>\n        Input a https://content.govdelivery.com/accounts/USCENSUS/bulletins/ ID,\n        then click Submit.\n      </p>\n      <form onSubmit={e => _handleSubmit(e)}>\n        <input\n          type='text'\n          style={{ textAlign: \"center\", width: \"30em\" }}\n          value={url}\n          onChange={e => setUrl(e.target.value)}\n        />\n        <br />\n        <input type='submit' value='Submit' />\n      </form>\n      {error ? <h3>link is not vaild</h3> : null}\n      {links.length ? (\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n          }}\n        >\n          <h3>{links.length} Links found</h3>\n          <button style={{ width: \"50%\" }} onClick={testLinks}>\n            Test all links (make sure to allow all popups)\n          </button>\n          <table>\n            <thead>\n              <tr>\n                <th>Type</th>\n                <th>Content</th>\n              </tr>\n            </thead>\n            <tbody>\n              {links.map(link => (\n                <tr>\n                  <td>{link.type}</td>\n                  <td>\n                    <a target='_blank' href={link.href}>\n                      {link.content ? link.content : \"hidden link\"}\n                    </a>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ) : null}\n      <hr />\n      {page ? (\n        <div>\n          <h3>Page</h3>\n          <div\n            ref={pageRef}\n            style={{ margin: \"2em\" }}\n            dangerouslySetInnerHTML={{ __html: page }}\n          />\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nconst rootElement = document.getElementById(\"root\")\nReactDOM.render(<App />, rootElement)\n"],"sourceRoot":""}